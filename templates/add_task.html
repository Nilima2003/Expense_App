<!DOCTYPE html>
<html>
<head>
    <title>Add Task</title>

    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        body {
            font-family: Arial;
            padding: 0;
            margin: 0;
            background: #f2f2f2;
        }

        .container {
            padding: 20px;
            max-width: 500px;
            margin: auto;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        h2 {
            text-align: center;
            margin-top: 20px;
        }

        label {
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0 20px 0;
            border-radius: 8px;
            border: 1px solid #ccc;
        }

        textarea {
            height: 80px;
        }

        button {
            width: 100%;
            padding: 12px;
            background: #007bff;
            color: white;
            font-size: 17px;
            border: none;
            border-radius: 10px;
        }

        .row {
            display: flex;
            align-items: center;
            margin-bottom: -10px;
        }

        .row i {
            margin-right: 10px;
            color: #007bff;
        }

        .hidden {
            display: none;
        }

        .checkbox-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .checkbox-row input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }

        .total-box {
            font-size: 22px;
            font-weight: bold;
            background: #e3f2fd;
            padding: 12px;
            border-radius: 10px;
            color: #007bff;
            margin-top: 10px;
            text-align: center;
        }
    </style>

    <script>
        function toggleExpenseFields() {
            document.getElementById("travel_box").style.display =
                document.getElementById("travelling").checked ? "block" : "none";

            document.getElementById("mobile_box").style.display =
                document.getElementById("mobile").checked ? "block" : "none";

            document.getElementById("food_box").style.display =
                document.getElementById("food").checked ? "block" : "none";

            document.getElementById("other_box").style.display =
                document.getElementById("other").checked ? "block" : "none";

            calculateTotal();
        }

        function calculateTotal() {
            let t = parseFloat(document.getElementById("travel_amt").value) || 0;
            let m = parseFloat(document.getElementById("mobile_amt").value) || 0;
            let f = parseFloat(document.getElementById("food_amt").value) || 0;
            let o = parseFloat(document.getElementById("other_amt").value) || 0;

            let total = t + m + f + o;

            document.getElementById("total_value").innerText = "₹ " + total.toFixed(2);
            document.getElementById("total_amount_hidden").value = total;
        }

        function showAssignedTo() {
            var val = document.getElementById("assign").value;
            document.getElementById("assigned").style.display =
                val === "other" ? "block" : "none";
        }
    </script>
</head>

<body>

<h2>Add Task</h2>

<div class="container">

    <form method="POST">

        <!-- TASK DETAILS CARD -->
        <div class="card">
            <div class="row"><i class="material-icons">event</i><label>Date</label></div>
            <input type="date" name="date" required>

            <div class="row"><i class="material-icons">person</i><label>Assigned By</label></div>
            <input type="text" name="assigned_by">

            <div class="row"><i class="material-icons">assignment_ind</i><label>Assignment</label></div>
            <select name="assignment" id="assign" onchange="showAssignedTo()">
                <option value="self">Self</option>
                <option value="other">Other</option>
            </select>

            <div id="assigned" class="hidden">
                <label>Assigned To</label>
                <input type="text" name="assigned_to">
            </div>

            <div class="row"><i class="material-icons">edit</i><label>Task Description</label></div>
            <textarea name="desc"></textarea>

            <div class="row"><i class="material-icons">done_all</i><label>Work Done Today</label></div>
            <textarea name="done"></textarea>

            <div class="row"><i class="material-icons">hourglass_top</i><label>Status</label></div>
            <select name="status">
                <option value="pending">Pending</option>
                <option value="in_progress">In Progress</option>
                <option value="completed">Completed</option>
            </select>

            <div class="row"><i class="material-icons">next_plan</i><label>Next Day Plan</label></div>
            <textarea name="next_day"></textarea>
        </div>

        <!-- EXPENSE CARD -->
        <div class="card">
            <h3 style="margin-bottom:15px;">Expenses</h3>

            <div class="checkbox-row">
                <input type="checkbox" id="travelling" name="exp_travelling" onchange="toggleExpenseFields()">
                <label>Travelling</label>
            </div>

            <div class="checkbox-row">
                <input type="checkbox" id="mobile" name="exp_mobile" onchange="toggleExpenseFields()">
                <label>Mobile Recharge</label>
            </div>

            <div class="checkbox-row">
                <input type="checkbox" id="food" name="exp_food" onchange="toggleExpenseFields()">
                <label>Food</label>
            </div>

            <div class="checkbox-row">
                <input type="checkbox" id="other" name="exp_other" onchange="toggleExpenseFields()">
                <label>Other</label>
            </div>

            <!-- Travelling -->
            <div id="travel_box" class="hidden">
                <label>Travelling Amount</label>
                <input type="number" id="travel_amt" name="travel_amt" step="0.01" onkeyup="calculateTotal()">
            </div>

            <!-- Mobile -->
            <div id="mobile_box" class="hidden">
                <label>Mobile Amount</label>
                <input type="number" id="mobile_amt" name="mobile_amt" step="0.01" onkeyup="calculateTotal()">
            </div>

            <!-- Food -->
            <div id="food_box" class="hidden">
                <label>Food Amount</label>
                <input type="number" id="food_amt" name="food_amt" step="0.01" onkeyup="calculateTotal()">
            </div>

            <!-- Other -->
            <div id="other_box" class="hidden">
                <label>Other Amount</label>
                <input type="number" id="other_amt" name="other_amt" step="0.01" onkeyup="calculateTotal()">

                <label>Other Purpose</label>
                <input type="text" name="other_purpose">
            </div>

            <!-- TOTAL EXPENSE -->
            <div class="total-box">
                Total Expense: <span id="total_value">₹ 0.00</span>
            </div>

            <input type="hidden" name="amount" id="total_amount_hidden" value="0">
        </div>

        <button>Save Task</button>
    </form>

</div>

</body>
</html>
